#!/usr/bin/env zsh

##
# ZSH Environment Settings
#
# Export environment variables for the current shell session
#

export DOTFILES_DIR="$HOME/.dotfiles" # Used internally

##
# LOCAL
#
source $HOME/.env # Bring in local environment variables

##
# EDITOR
#
export EDITOR='nvim'
export VISUAL='code'

##
# LANGUAGE
#
export LANG="en_US.UTF-8"; # Prefer US English and use UTF-8
export LC_ALL="en_US.UTF-8";

##
# TERMINAL
#
export TERM=screen-256color # Use 256 colors

##
# CUSTOM BIN
#
if [[ ! "$PATH" == *"$DOTFILES_DIR/bin"* ]]; then
  # Add .dotfiles/bin scripts to path
  export PATH=$DOTFILES_DIR/bin:$PATH
fi

##
# LANGUAGE ENV SETUP
#

# Ruby / rbenv
eval "$(rbenv init -)"

# Node / nvm
# These configurations help with load time
# Thanks to https://blog.mattclemente.com/2020/06/26/oh-my-zsh-slow-to-load.html
export NVM_LAZY_LOAD=true
export NVM_COMPLETION=false

# pnpm
export PNPM_HOME="$HOME/Library/pnpm"
export PATH="$PNPM_HOME:$PATH"

# Rust env
. "$HOME/.cargo/env"

##
# IDE SETTINGS
#

# Fix command repeating in VS Code terminal
# thanks to https://www.reddit.com/r/vscode/comments/f01ip6/integrated_terminal_echoes_name_of_command_for/
[[ "$TERM_PROGRAM" == "vscode" ]] && export DISABLE_AUTO_TITLE="true"
